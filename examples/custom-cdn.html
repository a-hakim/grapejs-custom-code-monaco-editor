<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Custom CDN - GrapesJS Custom Code Monaco Editor</title>
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <script src="https://unpkg.com/grapesjs"></script>
    <script src="../dist/index.js"></script>
    <style>
        body, html { height: 100%; margin: 0; }
    </style>
</head>
<body>
    <div id="gjs"></div>

    <script>
        // Example using custom CDN for Monaco Editor
        const editor = grapesjs.init({
            container: '#gjs',
            height: '100vh',
            plugins: ['grapesjs-custom-code-monaco-editor'],
            
            pluginsOpts: {
                'grapesjs-custom-code-monaco-editor': {
                    // Custom Monaco Loader configuration
                    monacoLoaderOptions: {
                        version: '0.52.0',  // Use specific version
                        baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.52.0/min/vs'  // Custom CDN
                    },
                    
                    // Monaco Editor configuration
                    monacoOptions: {
                        theme: 'vs-light',  // Light theme
                        language: 'javascript',  // Default to JavaScript
                        fontSize: 14,
                        lineNumbers: 'on',
                        wordWrap: 'on',
                        minimap: { enabled: false }
                    },
                    
                    // UI customization
                    modalTitle: 'JavaScript Code Editor',
                    buttonLabel: 'Apply Code',
                    
                    blockCustomCode: {
                        label: 'JS Code',
                        category: 'Code',
                        media: `<svg viewBox="0 0 24 24"><path d="M3 3h18v18H3V3zm16.525 13.707c-.131-.821-.666-1.511-2.252-2.155-.552-.259-1.165-.438-1.349-.854-.068-.248-.078-.382-.034-.529.113-.484.687-.629 1.137-.495.293.09.563.315.732.676.775-.507.775-.507 1.316-.844-.203-.314-.304-.451-.439-.586-.473-.528-1.103-.798-2.126-.77l-.528.067c-.507.124-.991.395-1.283.754-.855.968-.608 2.655.427 3.354 1.023.765 2.521.933 2.712 1.653.18.878-.652 1.159-1.475 1.058-.607-.136-.945-.439-1.316-.998l-1.372.788c.157.359.337.517.607.832 1.305 1.316 4.568 1.249 5.153-.754.021-.067.18-.528.056-1.237l.034.049zm-6.737-5.434h-1.686c0 1.453-.007 2.898-.007 4.354 0 .924.047 1.772-.104 2.033-.247.517-.886.451-1.175.359-.297-.146-.448-.349-.623-.641-.047-.078-.082-.146-.095-.146l-1.368.844c.229.473.563.879.994 1.137.641.383 1.502.507 2.404.305.588-.17 1.095-.519 1.358-1.059.384-.697.302-1.553.299-2.509.008-1.541 0-3.083 0-4.635l.003-.042z"/></svg>`
                    }
                }
            }
        });

        // Monitor loading progress
        console.log('Loading Monaco Editor from custom CDN...');
        
        editor.on('monaco:load-error', (error) => {
            console.error('Failed to load from custom CDN:', error);
            alert('Monaco Editor failed to load from the custom CDN. Please check the configuration.');
        });

        // Add initial content
        editor.setComponents(`
            <div style="padding: 20px;">
                <h1>Custom CDN Example</h1>
                <p>This example shows how to load Monaco Editor from a custom CDN (cdn.jsdelivr.net).</p>
                <p>Monaco Editor version 0.52.0 will be loaded with a light theme.</p>
                <p>Add a "JS Code" block to test the JavaScript editor!</p>
            </div>
        `);
    </script>
</body>
</html>